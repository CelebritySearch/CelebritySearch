<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

	<head>
    	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      	<title>Celebrity Twitter Search</title>
    	<link rel="stylesheet" href="style.css" type="text/css">
   		<link href="libs/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
	</head>

	<body id="index">
	 <div class="well" id="wrapper"> <!--  evtl noch "container"-->

	    <h1><center>Celebrity Twitter Search</center></h1>
	    <div>
	    <form class="form-search text-center">
		  <input type="text" class="input-xxlarge">
		  <button type="submit" class="btn btn-large btn-primary button-custom" id="search-button" href="#"><i class="icon-search icon-white"></i> Search</button>
		</form>
		</div>

		<div class="well container">

			<div class="well container" id="detailansicht">
				<a class="btn btn-danger pull-right" id="close-button" href="#"><i class="icon-remove"></i></a>
				<h3 id="ueberschrift"></h3>

			    <div class="tabbable"> <!-- Only required for left/right tabs -->
				    <ul class="nav nav-tabs">
					    <li id="tab-promis" class="active"><a href="#tab1" data-toggle="tab"><i class="icon-user"></i> Promis</a></li>
					    <li id="tab-tweets" ><a href="#tab2" data-toggle="tab"><i class="icon-list"></i> Tweets</a></li>
				    </ul>
				    <div class="tab-content">
					    <div id="section-promis" class="tab-pane active" id="tab1">
					    	<ul class="thumbnails text-center celebrity-section" id="celebrity-one">
							    <div class="thumbnail" id="celebrity1">
							    <h4>Promi 1</h4>
							      <img src="img/schauspieler.png" class="img-rounded">
							    </div>  
							</ul>

							<ul class="thumbnails text-center celebrity-section" id="celebrity-two">
							    <div class="thumbnail" id="celebrity2">
							    <h4>Promi 2</h4>
							      <img src="img/schauspieler.png" class="img-rounded">
							    </div>  
							</ul>

							<ul class="thumbnails text-center celebrity-section" id="celebrity-three">
							    <div class="thumbnail" id="celebrity3">
							    <h4>Promi 3</h4>
							      <img src="img/schauspieler.png" class="img-rounded">
							    </div>  
							</ul>
					    </div>
					    <div id="section-tweets" class="tab-pane" id="tab2">
					    <!-- 
					    	<div class="tweet" id="section-tweet1">
					    		<img src="img/schauspieler.png" class="tweet-pic">
					    		<div class="tweet-data">
					    			<p class="celebrity-name">Promi Name</p>
					    			<p class="tweet-text">blbalablabl</p>
					    		</div>
					    	</div> -->
						</div>
			    	</div>
	    		</div>
			</div>

			<ul class="thumbnails text-center" id="schauspieler">
			    <div class="thumbnail" id="Schauspieler">
			    <h4>Schauspieler</h4>
			      <img src="img/schauspieler.png" class="img-rounded">
			    </div>  
			</ul>

			<ul class="thumbnails text-center"id="sportler">
			    <div class="thumbnail" id="Sportler">
			      <h4>Sportler</h4>
			      <img src="img/fussball.png" class="img-rounded">
			      
			    </div>
			</ul>

			<ul class="thumbnails text-center"id="comedians">
			    <div class="thumbnail" id="Comedians">
			      <h4>Comedians</h4>
			      <img src="img/comedy.png" class="img-rounded">
			      
			    </div>
			</ul>

			<ul class="thumbnails text-center"id="musiker">			  
			    <div class="thumbnail" id="Musiker">
			      <h4>Musiker</h4>
			      <img src="img/musik.png" class="img-rounded">
			      
			    </div>			  
			</ul>

			<ul class="thumbnails text-center"id="mode">
			    <div class="thumbnail" id="Mode">
			      <h4>Mode</h4>
			      <img src="img/fashion.png" class="img-rounded">
			      
			    </div>		  
			</ul>

			<ul class="thumbnails text-center"id="politiker">  
			    <div class="thumbnail" id="Politiker">
			      <h4>Politiker</h4>
			      <img src="img/politik.png" class="img-rounded">
			      
			    </div>			  			  
			</ul>

			<ul class="thumbnails text-center"id="autoren">
			    <div class="thumbnail" id="Autoren">
			      <h4>Autoren</h4>
			      <img src="img/autoren.png" class="img-rounded">
			      
			    </div>			  			  
			</ul>

			<ul class="thumbnails text-center"id="reality-stars">
			    <div class="thumbnail" id="Reality-stars">
			      <h4>Reality-Stars</h4>
			      <img src="img/reality-stars.png" class="img-rounded">
			      
			    </div>
			</ul>

			<ul class="thumbnails text-center"id="moderatoren">			  
			    <div class="thumbnail" id="Moderatoren">
			      <h4>Moderatoren</h4>
			      <img src="img/moderatoren.png" class="img-rounded">
			      
			    </div>			  
			</ul>

		</div>
	

	</div>

	<script src="libs/jquery-1.9.1.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script type="text/javascript">
	var category = '';
	$(".thumbnail").on("click", function(event){
	 	$("#detailansicht").fadeIn(300);
	 	category = $(this).attr("id");
	 	document.getElementById("ueberschrift").innerHTML = category;
	 	//$("#detailansicht").css("visibility", "visible");
	});

	$("#close-button").on("click", function(){
	 	$("#detailansicht").fadeOut(300);
	 	//$("#detailansicht").css("visibility", "hidden");
	});

	$("#search-button").on("click", function(){
	 	$("#detailansicht").fadeIn(300);
	});

	$("#tab-promis").on("click", function(){
	 	$("#tab-tweets").removeClass("active");
	 	$("#section-tweets").removeClass("active");
	 	$("#tab-promis").addClass("active");
	 	$("#section-promis").addClass("active");
	});
 	
 	$("#tab-tweets").on("click", function(){
	 	$("#tab-tweets").addClass("active");
	 	$("#section-tweets").addClass("active");
	 	testCategoryTweets(category);
	 	// fillTweetView(category);
	 	$("#tab-promis").removeClass("active");
	 	$("#section-promis").removeClass("active");
	});

	function testCategoryTweets(category){
		var $tweetSection = $('#section-tweets');
		$tweetSection.empty();

		$.get('/categoryTweets', { category: category }, function(data){
			console.log(data);

			var tweets = data.docs;
			var length = tweets.length;

			for(var i = 0; i <length; i++){
				$tweetSection.append(createTweetView(tweets[i].user_name, tweets[i].text, tweets[i].profile_image_url));
			}
		});
	};
	
	function createTweetView(name, text, profile_image_url){
		var view = $('<div class="tweet" id="section-tweet1"><img src="img/schauspieler.png" class="tweet-pic"><div class="tweet-data"><p class="celebrity-name">Promi Name</p><p class="tweet-text">blbalablabl</p></div></div>');
		$(view.find('.tweet-pic')[0]).attr("src", profile_image_url);
		$(view.find('.celebrity-name')[0]).text(name);
		$(view.find('.tweet-text')[0]).text(text);

		return view;
	};

 	var socket = io.connect('http://localhost');

 	socket.on('tweet', function(tweet){
 		console.log(tweet);
 	});

 	function openCelebStream(screen_name){
 		$.get('/celeb', { screen_name: screen_name }, function(data){
 			var docs = data.response.docs;
 			if(docs.length > 0){
				var celebId = parseInt(docs[0].id);
				socket.emit('celebStream', { celebId: celebId });
 			} else {
 				throw new Error("Celebrity with screen_name: " + screen_name + " not found.");
 			}
 		});
 	}
	</script>
		
	</body>
</html>